{"version":3,"sources":["assets/close.png","components/tool-bar/Icons.js","components/image-uploader/index.js","components/tool-bar/index.js","plugins/addLinkPlugin.js","components/entities/mediaBlockRenderer.js","MyEditor.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","IconType","blockquote","react_default","a","createElement","className","viewBox","d","bold","image","italic","line","strikethrough","strong","tag","underline","link","fillRule","Icons","Object","keys","forEach","type","UploaderBox","styled","div","_templateObject","ImageUploader","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleIconClick","e","input","files","click","handleInputClick","stopPropagation","handleInputChange","asyncToGenerator","regenerator_default","mark","_callee","file","reader","wrap","_context","prev","next","length","FileReader","onload","src","target","result","insertImage","readAsDataURL","stop","state","imageList","_this2","onClick","tool_bar_Icons","ref","accept","onChange","multiple","React","PureComponent","BarBox","tool_bar_templateObject","Button","span","_templateObject2","ToolBar","onBoldClick","onLinkClick","image_uploader","onImageClick","addLinkPlugin","keyBindingFn","event","_ref","getEditorState","getSelection","isCollapsed","KeyBindingUtil","hasCommandModifier","which","handleKeyCommand","command","editorState","_ref2","setEditorState","window","prompt","selection","RichUtils","toggleLink","contentWithEntity","getCurrentContent","createEntity","url","newEditorState","EditorState","push","entityKey","getLastCreatedEntityKey","decorators","strategy","contentBlock","callback","contentState","findEntityRanges","character","getEntity","getType","component","getData","href","rel","aria-label","children","close_icon","require","ImageBox","mediaBlockRenderer_templateObject","Image","alt","console","log","handleClick","Media","block","getEntityAt","media","entity","key","getKey","currentContentState","currentEditorState","blockProps","selectionOfAtomicBlock","merge","anchorKey","anchorOffset","focusKey","focusOffset","getLength","contentStateWithoutEntity","Modifier","applyEntity","editorStateWithoutEntity","contentStateWithoutBlock","removeRange","mediaBlockRenderer_Image","blockKey","Container","MyEditor_templateObject","EditorBox","MyEditor_templateObject2","MyEditor","setDomEditorRef","domEditor","focus","setTimeout","setState","_onBoldClick","toggleInlineStyle","addLink","addImage","contentStateWithEntity","set","currentContent","AtomicBlockUtils","insertAtomicBlock","newState","logState","content","convertToRaw","createEmpty","plugins","tool_bar","lib_default","placeholder","blockRendererFn","editable","mediaBlockRenderer","App","src_MyEditor","Boolean","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.22d56d94.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAA+CAMAAABEH1h2AAAAWlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////9ZMre9AAAAHXRSTlMA+VdyQciiBkjs49vSIRcLE/Dfw8KzmXlqUD4dung6Ni4AAAHISURBVEjHtVfbloMgDAyKQlW81Vtr+/+/uQRt92SXrPbk7LzQGkaSOIEA/4PGznnWX5S69Fk+2+YTbp0O6kmghrQ+Sb6PO5dCjXc4hr4+WVz1kdv5a2o5Ldq1xrROL1P5epr/GYLttllVulLDmlabpbM8O92mZDoaVbZZU4Zs8s3rBBgk5RaAiRnb8HaVGmBhUhW8ayOmwL4c5FZfAv/3EsHzysEBXBX8j2bt0ZxQ8yOSPxvWRvYxP6xviVo6jNvBKTiMv6t/BK40nIRWNHzNy4GX1/dqV1SLOU83JdbPu0LxZQl8gAQZr/odUQnwEVBj4552RSLxsEVxA4JbUVgAmi1VvxNRkcmFtyXEWb9CQaZU72QP4RelI5+yKT2sOQQVoW2lrqrAJ2xFw1nxUbPrtQSKZOPTPxTlrtzZjxPE+TwbJv903gW7AMNn2bDsws3CZ+P4HBv0Lpbejw6ifATDBucNvR+x/FqI83k2tFjifsRJhlM2Xw0GXyykC50Xpk744YSyEYpWWDLCgpVtF8LNSrhVyjZq4TEhO6SER6TsgBa2B7LmRNYayRozYVsoa0plLbGoIZddB2SXEfFVSH4Rk18D5ZdQOb4A9OdZoU/RPQUAAAAASUVORK5CYII=\"","/**\n * 工具栏上的图标\n */\n\nimport React from 'react';\n\nconst IconType = {\n  blockquote: (\n    <svg className=\"Icon\" viewBox=\"0 0 32 32\">\n      <path d=\"M13.169 17.043h-5.081v-3.649c0-2.165 1.044-4.095 2.652-5.319 0.246-0.188 0.388-0.481 0.388-0.791v-2.457c0-0.624-0.566-1.099-1.18-0.984-4.504 0.845-7.942 4.812-7.942 9.552v13.594c0 0.55 0.45 1 1 1h10.162c0.55 0 1-0.45 1-1v-8.946c0-0.55-0.45-1-1-1zM28.979 17.043h-5.081v-3.649c0-2.165 1.044-4.095 2.652-5.319 0.246-0.188 0.388-0.481 0.388-0.791v-2.457c0-0.624-0.566-1.099-1.18-0.984-4.504 0.845-7.942 4.812-7.942 9.552v13.594c0 0.55 0.45 1 1 1h10.162c0.55 0 1-0.45 1-1v-8.946c0-0.55-0.45-1-1-1z\" />\n    </svg>\n  ),\n  bold: (\n    <svg className=\"Icon\" viewBox=\"0 0 32 32\">\n      <path d=\"M21.806 15.044c1.050-1.094 1.694-2.572 1.694-4.197v-0.319c0-3.362-2.753-6.091-6.147-6.091h-9.247c-0.472 0-0.856 0.384-0.856 0.856v21.222c0 0.509 0.412 0.922 0.922 0.922h9.959c3.656 0 6.619-2.944 6.619-6.578v-0.344c0-2.281-1.169-4.291-2.944-5.472zM10.25 7.438h7.022c1.784 0 3.228 1.387 3.228 3.103v0.297c0 1.713-1.447 3.103-3.228 3.103h-7.022v-6.503zM21.706 20.856c0 1.966-1.616 3.559-3.609 3.559h-7.847v-7.456h7.847c1.994 0 3.609 1.594 3.609 3.559v0.337z\" />\n    </svg>\n  ),\n  image: (\n    <svg className=\"Icon\" viewBox=\"0 0 32 32\">\n      <path d=\"M29 5h-26c-0.553 0-1 0.447-1 1v20c0 0.553 0.447 1 1 1h26c0.553 0 1-0.447 1-1v-20c0-0.553-0.447-1-1-1zM27.75 24.75h-23.5v-1.247l4.328-5.134 4.691 5.563 7.297-8.65 7.184 8.519v0.95zM27.75 20.694l-6.994-8.294c-0.1-0.119-0.281-0.119-0.381 0l-7.106 8.425-4.5-5.334c-0.1-0.119-0.281-0.119-0.381 0l-4.138 4.906v-13.147h23.5v13.444z\" />\n      <path d=\"M9.5 14.25c1.519 0 2.75-1.231 2.75-2.75s-1.231-2.75-2.75-2.75-2.75 1.231-2.75 2.75 1.231 2.75 2.75 2.75zM9.5 10.625c0.484 0 0.875 0.391 0.875 0.875s-0.391 0.875-0.875 0.875-0.875-0.391-0.875-0.875 0.391-0.875 0.875-0.875z\" />\n    </svg>\n  ),\n  italic: (\n    <svg className=\"Icon\" viewBox=\"0 0 32 32\">\n      <path d=\"M24.938 5h-13.5c-0.137 0-0.25 0.112-0.25 0.25v2c0 0.138 0.113 0.25 0.25 0.25h5.663l-4.875 17h-5.069c-0.138 0-0.25 0.113-0.25 0.25v2c0 0.137 0.112 0.25 0.25 0.25h13.5c0.137 0 0.25-0.113 0.25-0.25v-2c0-0.137-0.113-0.25-0.25-0.25h-5.831l4.875-17h5.238c0.137 0 0.25-0.112 0.25-0.25v-2c0-0.138-0.113-0.25-0.25-0.25z\" />\n    </svg>\n  ),\n  line: (\n    <svg className=\"Icon\" viewBox=\"0 0 32 32\">\n      <path d=\"M28.25 14.875h-24.5c-0.138 0-0.25 0.113-0.25 0.25v1.75c0 0.137 0.112 0.25 0.25 0.25h24.5c0.137 0 0.25-0.113 0.25-0.25v-1.75c0-0.137-0.113-0.25-0.25-0.25z\" />\n    </svg>\n  ),\n  strikethrough: (\n    <svg className=\"Icon\" viewBox=\"0 0 32 32\">\n      <path d=\"M29.75 14.813h-11.941c-0.313-0.063-0.641-0.125-0.988-0.188-0.497-0.091-0.694-0.128-0.963-0.181-1.603-0.313-2.569-0.625-3.338-1.069-1.097-0.641-1.631-1.509-1.631-2.659 0-1.156 0.475-2.116 1.375-2.781 0.887-0.656 2.15-1.003 3.65-1.003 1.712 0 3.034 0.45 3.931 1.337 0.456 0.45 0.791 1.003 0.994 1.644 0.041 0.128 0.087 0.313 0.134 0.556 0.028 0.15 0.163 0.256 0.309 0.256h2.275c0.175 0 0.316-0.144 0.316-0.316v-0.031c-0.022-0.213-0.041-0.378-0.063-0.5-0.228-1.359-0.875-2.553-1.866-3.447-1.387-1.266-3.428-1.931-5.897-1.931-2.259 0-4.294 0.566-5.728 1.591-0.8 0.575-1.419 1.288-1.831 2.116-0.422 0.847-0.634 1.825-0.634 2.903 0 0.922 0.178 1.703 0.541 2.391 0.259 0.491 0.613 0.922 1.066 1.313h-7.213c-0.138 0-0.25 0.113-0.25 0.25v1.875c0 0.137 0.112 0.25 0.25 0.25h13.537c0.066 0.012 0.122 0.025 0.184 0.038 0.966 0.194 1.547 0.325 2.081 0.475 0.719 0.203 1.269 0.416 1.725 0.672 1.119 0.631 1.666 1.538 1.666 2.781 0 1.103-0.484 2.087-1.363 2.775-0.953 0.747-2.363 1.137-4.078 1.137-1.366 0-2.522-0.266-3.444-0.781-0.909-0.509-1.534-1.244-1.866-2.172-0.025-0.069-0.053-0.163-0.084-0.281-0.037-0.137-0.166-0.234-0.303-0.234h-2.491c-0.175 0-0.316 0.144-0.316 0.316v0.031c0.006 0.072 0.013 0.131 0.019 0.178 0.203 1.525 0.947 2.775 2.209 3.712 1.472 1.087 3.544 1.663 5.994 1.663 2.631 0 4.838-0.619 6.381-1.791 0.781-0.591 1.381-1.319 1.784-2.156 0.406-0.847 0.616-1.809 0.616-2.859 0-0.994-0.181-1.825-0.556-2.544-0.181-0.35-0.409-0.672-0.681-0.962h6.484c0.137 0 0.25-0.113 0.25-0.25v-1.875c0-0.134-0.113-0.247-0.25-0.247z\" />\n    </svg>\n  ),\n  strong: (\n    <svg className=\"Icon\" viewBox=\"0 0 32 32\">\n      <path d=\"M28.25 25.5h-24.5c-0.138 0-0.25 0.113-0.25 0.25v2.5c0 0.137 0.112 0.25 0.25 0.25h24.5c0.137 0 0.25-0.113 0.25-0.25v-2.5c0-0.137-0.113-0.25-0.25-0.25zM7.928 23h2.656c0.131 0 0.25-0.084 0.291-0.212l1.678-5.188h6.85l1.663 5.188c0.041 0.125 0.156 0.212 0.291 0.212h2.784c0.034 0 0.069-0.006 0.1-0.016 0.159-0.056 0.244-0.228 0.188-0.387l-6.503-18.891c-0.044-0.122-0.159-0.206-0.288-0.206h-3.197c-0.131 0-0.247 0.081-0.287 0.206l-6.513 18.891c-0.013 0.031-0.016 0.066-0.016 0.1-0.003 0.166 0.134 0.303 0.303 0.303zM15.925 6.872h0.128l2.619 8.244h-5.394l2.647-8.244z\" />\n    </svg>\n  ),\n  tag: (\n    <svg className=\"Icon\" viewBox=\"0 0 32 32\">\n      <path d=\"M29.313 14.338l-0.925-9.769c-0.047-0.506-0.45-0.906-0.956-0.956l-9.781-0.925c-0.1 0-0.178 0.031-0.238 0.091l-14.634 14.634c-0.122 0.122-0.122 0.319 0 0.441l11.369 11.369c0.059 0.059 0.137 0.091 0.222 0.091s0.162-0.031 0.222-0.091l14.634-14.634c0.063-0.066 0.094-0.156 0.087-0.25zM14.366 26.084l-8.45-8.45 12.491-12.491 7.719 0.731 0.731 7.719-12.491 12.491z\" />\n      <path d=\"M21.25 8c-1.516 0-2.75 1.234-2.75 2.75s1.234 2.75 2.75 2.75 2.75-1.234 2.75-2.75-1.234-2.75-2.75-2.75zM21.25 11.75c-0.553 0-1-0.447-1-1s0.447-1 1-1 1 0.447 1 1-0.447 1-1 1z\" />\n    </svg>\n  ),\n  underline: (\n    <svg className=\"Icon\" viewBox=\"0 0 32 32\">\n      <path d=\"M25.75 25.125h-19.5c-0.138 0-0.25 0.106-0.25 0.238v1.9c0 0.131 0.112 0.238 0.25 0.238h19.5c0.137 0 0.25-0.106 0.25-0.238v-1.9c0-0.131-0.113-0.238-0.25-0.238zM16 22.75c2.169 0 4.206-0.847 5.744-2.381s2.381-3.575 2.381-5.744v-9.75c0-0.206-0.169-0.375-0.375-0.375h-1.875c-0.206 0-0.375 0.169-0.375 0.375v9.75c0 3.031-2.469 5.5-5.5 5.5s-5.5-2.469-5.5-5.5v-9.75c0-0.206-0.169-0.375-0.375-0.375h-1.875c-0.206 0-0.375 0.169-0.375 0.375v9.75c0 2.169 0.847 4.206 2.381 5.744s3.575 2.381 5.744 2.381z\" />\n    </svg>\n  ),\n  link: (\n    <svg className=\"Icon\" viewBox=\"0 0 24 24\">\n      <path d=\"M6.77 17.23c-.905-.904-.94-2.333-.08-3.193l3.059-3.06-1.192-1.19-3.059 3.058c-1.489 1.489-1.427 3.954.138 5.519s4.03 1.627 5.519.138l3.059-3.059-1.192-1.192-3.059 3.06c-.86.86-2.289.824-3.193-.08zm3.016-8.673l1.192 1.192 3.059-3.06c.86-.86 2.289-.824 3.193.08.905.905.94 2.334.08 3.194l-3.059 3.06 1.192 1.19 3.059-3.058c1.489-1.489 1.427-3.954-.138-5.519s-4.03-1.627-5.519-.138L9.786 8.557zm-1.023 6.68c.33.33.863.343 1.177.029l5.34-5.34c.314-.314.3-.846-.03-1.176-.33-.33-.862-.344-1.176-.03l-5.34 5.34c-.314.314-.3.846.03 1.177z\" fillRule=\"evenodd\"></path>\n    </svg>\n  )\n};\n\nconst Icons = [];\nObject.keys(IconType).forEach(type => {\n  Icons[type] = () => IconType[type];\n});\n\nexport default Icons;\n","/**\n * 图片上传组件，点击图标后选择图片进行上传\n */\nimport React from 'react';\nimport styled from 'styled-components';\nimport Icons from './../tool-bar/Icons';\n\n\nconst UploaderBox = styled.div`\n  img.upload-icon {\n    width: 20px;\n    height: 20px;\n    margin-right: 10px;\n  }\n  input {\n    display: none;\n  }\n`;\n\nclass ImageUploader extends React.PureComponent {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      imageList: [],\n    };\n  }\n\n  // 点击上传图片图标的时候触发上传图片\n  handleIconClick = (e) => {\n    if (this.input.files) {\n      this.input.click();\n    }\n  }\n\n  handleInputClick = (e) => {\n    e.stopPropagation();\n  }\n\n  handleInputChange = async () => {\n    const files = this.input.files || [];\n\n    if (files.length > 0) {\n      const file = files[0];  \n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const src = e.target.result;\n        this.props.insertImage(src);\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n\n\n  render() {\n    return (\n      <UploaderBox className=\"image-uploader\">\n        <div onClick={this.handleIconClick}>\n          <Icons.image />\n        </div>\n        <input\n          ref={e => this.input = e}\n          type=\"file\"\n          accept=\"image/*\"\n          onClick={this.handleInputClick}\n          onChange={this.handleInputChange}\n          multiple={false}\n        />\n      </UploaderBox>\n    );\n  }\n}\n\n\nexport default ImageUploader;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport Icons from './Icons';\nimport ImageUploader from '../image-uploader';\n\nconst BarBox = styled.div`\n  width: 100%;\n  height: 24px;\n  border-bottom: 1px solid #ebebeb;\n  margin-bottom: 20px;\n  display: flex;\n  align-items: center;\n\n  .Icon {\n    width: 24px;\n    height: 24px;\n    fill: #999;\n  } \n`;\n\nconst Button = styled.span`\n  margin-right: 5px;\n`;\n\nconst ToolBar = props => {\n\n  return (\n    <BarBox>\n      <Button onClick={props.onBoldClick}><Icons.bold /></Button>\n      <Button onClick={props.onLinkClick}><Icons.link /></Button>\n      <Button>\n        <ImageUploader insertImage={props.onImageClick} />\n      </Button>\n    </BarBox>\n  );\n};\n\n\nToolBar.propTypes = {\n  onBoldClick: PropTypes.func.isRequired,\n  onLinkClick: PropTypes.func.isRequired,\n  onImageClick: PropTypes.func.isRequired,\n};\n\nexport default ToolBar;\n","import React from 'react';\nimport {\n  RichUtils,\n  KeyBindingUtil,\n  EditorState,\n} from 'draft-js';\n\nexport const Link = props => {\n  const { contentState, entityKey } = props;\n  const { url } = contentState.getEntity(entityKey).getData();\n  return (\n    <a\n      href={url}\n      rel=\"noopener noreferrer\"\n      target=\"_blank\"\n      aria-label={url}\n    >\n      {props.children}\n    </a>\n  );\n};\n\n\nexport const linkStrategy = (contentBlock, callback, contentState) => {\n  contentBlock.findEntityRanges(character => {\n    // console.log(character);\n    const entityKey = character.getEntity();\n    return (\n      entityKey !== null &&\n        contentState.getEntity(entityKey).getType() === 'LINK'\n    );\n  }, callback);\n};\n\n\nconst addLinkPlugin = {\n  keyBindingFn(event, { getEditorState }) {\n    const editorState = getEditorState();\n    const selection = editorState.getSelection();\n    if (selection.isCollapsed()) {\n      return;\n    }\n    if (KeyBindingUtil.hasCommandModifier(event) && event.which === 75) {\n      return 'add-link';\n    }\n  },\n\n\n  handleKeyCommand(command, editorState, { getEditorState, setEditorState }) {\n    if (command !== 'add-link') {\n      return 'not-handled';\n    }\n    const link = window.prompt('Paste the link: ');\n    const selection = editorState.getSelection();\n    if (!link) {\n      // 无链接地址输入时，删除原有链接\n      setEditorState(RichUtils.toggleLink(editorState, selection, null));\n      return 'handled';\n    }\n\n    const content = editorState.getCurrentContent();\n    const contentWithEntity = content.createEntity('LINK', 'MUTABLE', { url: link });\n    const newEditorState = EditorState.push(\n      editorState, contentWithEntity, 'create-entity'\n    );\n    const entityKey = contentWithEntity.getLastCreatedEntityKey();\n    setEditorState(\n      RichUtils.toggleLink(newEditorState, selection, entityKey)\n    );\n    return 'handled';\n  },\n\n  decorators: [{\n    strategy: linkStrategy,\n    component: Link\n  }]\n};\n\n\nexport default addLinkPlugin;\n","import React from \"react\";\nimport styled from 'styled-components';\nimport { Modifier, EditorState, convertToRaw } from 'draft-js';\n\nconst close_icon = require('../../assets/close.png');\n\nconst ImageBox = styled.div`\n  width: 90%;\n  position: relative;\n\n  img.img-media {\n    width: 100%;\n  }\n\n  .close-icon {\n    width: 30px;\n    height: 30px;\n    position: absolute;\n    top: 0;\n    right: 0;\n    background-color: rgba(100, 100, 100, 0.1);\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n`;\n\nconst Image = props => {\n  if (!!props.src) {\n    return (\n      <ImageBox>\n        <img src={props.src} alt=\"\" className=\"img-media\" onClick={() => console.log(2)}/>\n        <div className=\"close-icon\" onClick={props.handleClick}>\n          <img src={close_icon} />\n        </div>\n      </ImageBox>\n    );\n  }\n  return null;\n};\n\n\nconst Media = props => {\n  if (!props.block.getEntityAt(0)) return null;\n\n  const entity = props.contentState.getEntity(props.block.getEntityAt(0));\n  const { src } = entity.getData();\n  const type = entity.getType();\n\n  let media;\n\n  if (type === 'image') {\n    const key = props.block.getKey();\n    const currentContentState = props.contentState;\n    const currentEditorState = props.blockProps.editorState;\n\n    const selection = currentEditorState.getSelection();\n    const selectionOfAtomicBlock = selection.merge({\n      anchorKey: key,\n      anchorOffset: 0,\n      focusKey: key,\n      focusOffset: props.block.getLength(),\n    });\n\n    const contentStateWithoutEntity = Modifier.applyEntity(\n      currentContentState, selectionOfAtomicBlock, null\n    );\n    const editorStateWithoutEntity = EditorState.push(\n      currentEditorState, contentStateWithoutEntity, 'apply-entity'\n    );\n\n    const contentStateWithoutBlock = Modifier.removeRange(\n      contentStateWithoutEntity, selectionOfAtomicBlock, 'backward'\n    );\n    const newEditorState =  EditorState.push(\n      editorStateWithoutEntity, contentStateWithoutBlock, 'remove-range'\n    );\n\n    media = <Image\n      src={src} \n      blockKey={key}\n      handleClick={() => {\n        props.blockProps.onChange(newEditorState);\n      }}\n    />;\n  }\n\n  return media;\n};\n\n\nexport const mediaBlockRenderer = (block, onChange, editorState) => {\n\n  if (block.getType() === 'atomic') {\n    return {\n      component: Media,\n      editable: false,\n      props: {\n        onChange,\n        editorState\n      },\n    };\n  }\n};\n\n\n\n","import React from 'react';\nimport {\n  EditorState, RichUtils, convertToRaw, AtomicBlockUtils\n} from 'draft-js';\nimport Editor from \"draft-js-plugins-editor\";\nimport styled from 'styled-components';\nimport 'draft-js/dist/Draft.css';\nimport ToolBar from './components/tool-bar';\nimport addLinkPlugin from './plugins/addLinkPlugin';\nimport { mediaBlockRenderer } from './components/entities/mediaBlockRenderer';\n\nconst Container = styled.div`\n  margin: 20px auto;\n  padding: 15px;\n  border: 1px solid #ccc;\n  text-align: left;\n  max-width: 600px;\n  width: 90%;\n  position: relative;\n`;\n\nconst EditorBox = styled.div`\n  min-height: 400px;\n`;\n\nclass MyEditor extends React.PureComponent {\n\n  constructor() {\n    super();\n\n    this.state = {\n      editorState: EditorState.createEmpty()\n    };\n\n    this.plugins = [\n      addLinkPlugin,\n    ];\n  }\n\n  componentDidMount() {\n    this.focus();\n  }\n\n  setDomEditorRef = ref => this.domEditor = ref;\n\n  focus = () => {\n    setTimeout(() => this.domEditor.focus(), 0);\n  }\n\n  onChange = (editorState) => {\n    this.setState({ editorState });\n  }\n\n  _onBoldClick = () => {\n    this.onChange(RichUtils.toggleInlineStyle(this.state.editorState, 'BOLD'));\n  }\n\n  addLink = () => {\n    const editorState = this.state.editorState;\n    const selection = editorState.getSelection();\n    const link = window.prompt('Input the link here: ');\n\n    if (!link) {\n      this.onChange(RichUtils.toggleLink(editorState, selection, null));\n      return 'handled';\n    }\n\n    const content = editorState.getCurrentContent();\n    const contentWithEntity = content.createEntity('LINK', 'MUTABLE', { url: link });\n    const newEditorState = EditorState.push(\n      editorState, contentWithEntity, 'create-entity'\n    );\n    const entityKey = contentWithEntity.getLastCreatedEntityKey();\n\n    this.onChange(RichUtils.toggleLink(newEditorState, selection, entityKey));\n    return 'handled';\n  }\n\n  addImage = src => {\n    const editorState = this.state.editorState;\n    const contentState = editorState.getCurrentContent();\n    const contentStateWithEntity = contentState.createEntity(\n      'image',\n      'IMMUTABLE',\n      { src }\n    );\n    const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n    const newEditorState = EditorState.set(\n      editorState,\n      { currentContent: contentStateWithEntity },\n      'create-entity'\n    );\n\n    this.setState({\n      editorState: AtomicBlockUtils.insertAtomicBlock(newEditorState, entityKey, ' ')\n    }, () => {\n      setTimeout(this.focus, 0);\n    });\n  }\n\n  handleKeyCommand = command => {\n    const newState = RichUtils.handleKeyCommand(\n      this.state.editorState,\n      command\n    );\n    if (newState) {\n      this.onChange(newState);\n      return \"handled\";\n    }\n    return \"not-handled\";\n  };\n\n  logState = () => {\n    const content = this.state.editorState.getCurrentContent();\n    console.log(convertToRaw(content));\n  }\n\n  render() {\n    return (\n      <Container>\n        <ToolBar\n          onBoldClick={this._onBoldClick}\n          onLinkClick={this.addLink}\n          onImageClick={this.addImage}\n        />\n\n        <EditorBox>\n          <Editor\n            editorState={this.state.editorState}\n            handleKeyCommand={this.handleKeyCommand}\n            onChange={this.onChange}\n            placeholder=\"Please input here...\"\n            ref={this.setDomEditorRef}\n            plugins={this.plugins}\n            blockRendererFn={(block) => mediaBlockRenderer(block, this.onChange, this.state.editorState)}\n          />\n        </EditorBox>\n      </Container>\n    );\n  }\n}\n\nexport default MyEditor;\n\n\n","import React from 'react';\nimport MyEditor from './MyEditor';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <MyEditor></MyEditor>\n    </div>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}